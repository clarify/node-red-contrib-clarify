<!-- <script type="text/javascript" src="tools.js"></script> -->
<script type="text/javascript">
    RED.nodes.registerType("clarify-api", {
        category: "config",
        credentials: {
            clientID: { type: 'text' },
            clientSecret: { type: 'password' }
        },
        defaults: {
            apiUrl: {
                value: "https://dev.clfy.io/api",
            },
            integrationID: { value: "", required: true },
            integrationName: { value: "", required: true },
            organizationID: { value: "", required: true },
            name: {
                value: ""
            }
        },
        label: function () {
            return this.name ? this.name : 'Client Credentials';
        },
        oneditprepare: function () {
            $('#node-config-input-clear-token').click(() => {
                $.getJSON('clearToken', { id: this.id });
            })
        }
    });
</script>

<script type="text/html" data-template-name="clarify-api">
    <div class="form-row">
        <label for="node-config-input-apiUrl"><i class="icon-bookmark"></i> Clarify API url</label>
        <input type="text" id="node-config-input-apiUrl" placeholder="Clarify API Url">
    </div>
    <div class="form-row">
      <label for="node-config-input-clientID"><i class="icon-bookmark"></i>Client ID</label>
      <input type="text" id="node-config-input-clientID" placeholder="Client ID">
    </div>
    <div class="form-row">
      <label for="node-config-input-clientSecret"><i class="icon-bookmark"></i>Client Secret</label>
      <input type="password" id="node-config-input-clientSecret" placeholder="Client Secret">
    </div>
    <div class="form-row">
      <label for="node-config-input-integration-id"><i class="icon-bookmark"></i> Integration ID</label>
      <input type="text" id="node-config-input-integrationID" placeholder="integration-id">
    </div>
    <div class="form-row">
        <label for="node-config-input-integration-name"><i class="icon-bookmark"></i> Integration Name</label>
        <input type="text" id="node-config-input-integrationName" placeholder="integration-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-organization-id"><i class="icon-bookmark"></i> Organization ID</label>
        <input type="text" id="node-config-input-organizationID" placeholder="organization-id">
    </div>
    <div class="form-row">
      <label for="node-config-input-name"><i class="icon-bookmark"></i> Name</label>
      <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-config-input-clear-token">Clear access token</label>
        <button type="button" id="node-config-input-clear-token">Clear</button>
      </div>
</script>

<script type="text/html" data-help-name="clarify-api">
    <p>Configuration Node for Clarify API</p>

    <h3>General Properties</h3>
    <p>All properties are mandatory.</p>
    <dl class="message-properties">
        <dt>Clarify API url <span class="property-type">string</span></dt>
        <dd>URL to the Clarify API Endpoint</dd>

        <dt>Client ID <span class="property-type">string</span></dt>
        <dd>Client ID credential</dd>

        <dt>Client Secret <span class="property-type">string</span></dt>
        <dd>Client Secret credential</dd>

        <dt>Integration ID <span class="property-type">string</span></dt>
        <dd>Integration ID</dd>

        <dt>Integration Name <span class="property-type">string</span></dt>
        <dd>Integration Name</dd>

        <dt>Organization ID <span class="property-type">string</span></dt>
        <dd>Organization ID</dd>
    </dl>

    <h3>Actions</h3>
    <dl class="message-properties">
        <dt>Clear access token <span class="property-type">button</span></dt>
        <dd>Reset current access token</dd>
    </dl>

    
    <h3>References</h3>
        <p>
            <a href="#">Clarify Documentation</a>
        </p>
</script>